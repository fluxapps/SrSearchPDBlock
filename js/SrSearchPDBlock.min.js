document.addEventListener("DOMContentLoaded",function(){class a{constructor({parent_el:a,texts:b}){this.parent_el=a,this.texts=b}init(){}initField(){const a=document.createElement("input");return a.classList.add("form-control"),a.placeholder=this.texts.placeholder,a.type="search",a}}class b extends a{constructor({operator:a,parent_el:b,texts:{placeholder:c}}){super({parent_el:b,texts:{placeholder:c}}),this.operator=a}init(){const a=this.initField();a.addEventListener("input",this.onInput.bind(this,a)),this.parent_el.appendChild(a)}onInput(a){const b=this.parseWords(a.value);document.querySelectorAll(".ilContainerBlockHeader, .ilPDBlockSubHeader, .ilContainerListItemCB, .ilContainerListFooter, .ilToolbar, .ilNewObjectSelector").forEach(function(a){a.style.display=0<b.length?"none":""}),document.querySelectorAll(".ilObjListRow, .il-card, .tile, .il-item").forEach(this.testObject.bind(this,b))}parseWords(a){return a.toLowerCase().split(/\s/).map(function(a){return a.trim()}).filter(function(a){return 0<a.length})}testObject(a,b){b.style.display="";const c=this.parseWords(b.innerText);let d;if(0<a.length)switch(this.operator){case 1:d=this.testObjectAND(a,c);break;case 2:d=this.testObjectOR(a,c);break;default:d=!0;}else d=!0;b.style.display=d?"":"none"}testObjectAND(a,b){return a.every(function(a){return b.some(function(b){return-1!==b.indexOf(a)})})}testObjectOR(a,b){return a.some(function(a){return b.some(function(b){return-1!==b.indexOf(a)})})}}class c extends a{constructor({action:a,method:b,name:c,parent_el:d,texts:{go:e,placeholder:f}}){super({parent_el:d,texts:{go:e,placeholder:f}}),this.action=a,this.method=b,this.name=c}init(){const a=document.createElement("form");a.action=this.action,a.method=this.method;const b=this.initField();b.name=this.name,a.appendChild(b);const c=document.createElement("button");c.classList.add("btn","btn-default"),c.innerText=this.texts.go,c.type="submit",a.appendChild(c),this.parent_el.appendChild(a)}}document.querySelectorAll(".SrSearchPDBlockEverywhere").forEach(function(a){a.remove(),document.querySelector(".il-maincontrols-metabar, #ilTopBarNav").appendChild(a)}),document.querySelectorAll(".SrSearchPDBlock").forEach(function(a){const d=JSON.parse(atob(a.dataset.config));d.parent_el=a;let e=null;switch(d.type){case"current_page_search":e=new b(d);break;case"global_search":e=new c(d);break;default:}e&&e.init()})});
